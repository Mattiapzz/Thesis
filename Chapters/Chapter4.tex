\chapter{Static conditions and Steady State}
\label{Ch:SS}
%
\section{Static condition}
%
The evaluation of static condition of the motorcycle is a necessary to compute the inertial values and the coordinate of the CoM of the whole rigid body. Up to this point ${\it XG}$, ${\it YG}$ and ${\it ZG}$ are function of the freeze DoF (which correspond to the value of the variable in static condition). Moreover, the only inertial value known is the total mass that can be easily calculated as a sum of all the other masses. The rest of inertial unknowns are, as well as the CoM coordinates, function of the freezed DoF.  
%
\subsection{Problem formulation}
%
In static condition all time derivative are zero which is equivalent to impose a constant value to all variables. This will drive to zero most of the equation. Moreover, static conditions means no velocity, therefore all the quasi-coordinate ($u$, $v$, $\Omega$) are set to zero. The equation defining the slips are discarded due to singularity in static condition. In fact, whenever the longitudinal velocity is equal to zero the values of the longitudinal and lateral slips are not defined. Since our interest is in finding the static values of the variables, one should consider an equilibrium condition. Therefore both $\phi$ and $\delta$ are set to zero. The problem will be still undetermined and can not be solved analytically. Furthermore, it can be solved as a non linear problem with a quadratic minimisation.\\
The minimisation problem is solved using a specific tool in Maple from the Optimisation package.
The objective function to be minimised in the sum of the square of all the ordinary differential equations with the addition of the algebraic definition of some quantities (CoM,Inertia,$x_r$, \textit{etc.}). Actually the ODE system has no more differential parts since we are considering static condition. Therefore the system is composed of algebraic equations. The values of some angles are bounded with value consistent with physical system. The algebraic system, in fact, is non-linear and multiple local minimum can be found. For this reason one should restrict the allowable region for the NLP. Furthermore, the convergence of the solution is highly dependent on initial point or initial guess.\\
The results of the minimisation problem are reported in the following section.
%
\subsection{Solution}
%
The solution of the minimisation problem yields first of all the vertical forces in table \ref{tab:vertforce}. The overall force distribution is fairly balanced between front and rear axle.

%
\begin{table}[h!]
    \centering
    \begin{tabular}{@{}cc@{}}
    \toprule
    \multicolumn{2}{c}{\textbf{Vertical Loads}} \\ \midrule
    ${\it Fzf}_{00}$  & $1320.980 \; [\si{\newton}]$ \\
    ${\it Fzr}_{00}$  & $1325.438 \; [\si{\newton}]$ \\ \bottomrule
    \end{tabular}
    \caption{Vertical load distribution in static condition}
    \label{tab:vertforce}
\end{table}
%

The position of the two wheels defined in chapter \ref{Ch:MotorcycleModel} with the variables $x_r$, $y_r$, $z_r$, $x_f$, $y_f$ and $z_f$ are reported here. The results are not really interesting, however it is a check that everything works as it is supposed to. As highlighted in table \ref{tab:wheelcoordinates} the $y$ coordinate of both wheels is at zero, the $z$ coordinate represent exactly the radii of front and rear wheel. The $x$ coordinate gives the position of the contact point that in this case overlaps the point of application of the forces.

%
\begin{table}[h!]
    \centering
    \begin{tabular}{@{}cccc@{}}
    \toprule
    \multicolumn{4}{c}{\textbf{Wheel Coordinates}}                         \\
    \multicolumn{2}{c}{\textbf{Front} $[\si{\metre}]$} & \multicolumn{2}{c}{\textbf{Rear} $[\si{\metre}]$} \\ \midrule
    $x_{f_{00}}$  &  $ 0.8594                  $ & $x_{r_{00}}$  &  $ 0.5138                  $ \\     
    $y_{f_{00}}$  &  $-{ 6.449\times 10^{-308}}$ & $y_{r_{00}}$  &  $-{ 1.905\times 10^{-308}}$ \\  
    $z_{f_{00}}$  &  $ 0.2788                  $ & $z_{r_{00}}$  &  $ 0.3068                  $ \\ \bottomrule
    \end{tabular}
    \caption{Wheels centre coordinates}
    \label{tab:wheelcoordinates}
\end{table}
%

For obvious reasons and trivially from their definition in chapter \ref{Ch:MotorcycleModel} the angles of the front wheel in static case ere both zero.
%
\begin{equation*}
    \begin{array}{l}
        \delta_{f_{00}}=0\\
        \phi_{f_{00}}=0
    \end{array}
\end{equation*}
%
As defined in chapter \ref{Ch:MotorcycleModel} the motorcycle CoM is define with the 3 coordinate ${\it XG}$, ${\it YG}$ and ${\it ZG}$. ${\it YG}$ is zero for the assumption of symmetry while the other two are computed in the NLP and yields the following values.(Table \ref{tab:CoMPosition})

%
\begin{table}[h!]
    \centering
    \begin{tabular}{@{}ccc@{}}
    \toprule
    \multicolumn{3}{c}{\textbf{CoM position}} \\ \midrule
    ${\it XG} \; [\si{\metre}]$ & ${\it YG} \; [\si{\metre}]$ & ${\it ZG} \; [\si{\metre}]$ \\
    $0.1717$              &  $0$                  & $0.6661$              \\ \bottomrule
    \end{tabular}
    \caption{CoM position with respect to $RF_\phi$}
    \label{tab:CoMPosition}
\end{table}
%

The most interesting result are the values of the freezed DoF in table \ref{tab:DoFFreezed}. The computed values are the one expected from the definition of the variables in the model derivation. In particular front ar rear suspension are in compression state. As one can notice the relative angle of the swing arm ($\eta$) is very small due to the rigidity of the rear suspension. On the other hand, the front suspension is more compliant and the deflection in greater. This deformation reflects directly on the pitch angle $t\theta$. Since the rear deformation is almost null it is trivial to show that there is a rigid rotation around the $y$ axis of the motorcycle.

%
\begin{table}[h!]
    \centering
    \begin{tabular}{@{}cccc@{}}
    \toprule
    \multicolumn{4}{c}{\textbf{DoF freezed}} \\ \midrule
    $\eta_{00} \; [\si{\radian}]$ & $h_{00} \; [\si{\metre}]$ & $s_{f_{00}} \; [\si{\metre}]$ &  $\theta_{00} \; [\si{\radian}]$ \\
    $0.0288  $ & $0.4558  $ & $0.0584  $ & $-0.1169 $ \\ \bottomrule
    \end{tabular}
    \caption{Freezed DoF values in static condition}
    \label{tab:DoFFreezed}
\end{table}
%

The last parameters computed are the inertial ones. As highlighted in chapter \ref{Ch:MotorcycleModel} the motorcycle is consider as symmetric and therefore most of the off diagonal moment of inertia are zero. In particular, the only moment of inertia needed are ${\it IX}$, ${\it IY}$, ${\it IZ}$ and ${\it CXZ}$

%
\begin{table}[h!]
    \centering
    \begin{tabular}{@{}ccccc@{}}
    \toprule
    \multicolumn{5}{c}{\textbf{Inertial Values}} \\ \midrule
    $M_{{\it tot}} \; [\si{\kilogram}]$ & ${\it IX} \; [\si{\kilogram\metre^2}]$ & ${\it IY} \; [\si{\kilogram\metre^2}]$ & ${\it IZ} \; [\si{\kilogram\metre^2}]$ & ${\it CXZ} \; [\si{\kilogram\metre^2}]$\\
    $269.85$ & $31.121$ & $67.723$ & $38.681$ & $1.772$\\ \bottomrule
    \end{tabular}
    \caption{Inertial properties of the motorcycle rigid body}
    \label{tab:Inertia}
\end{table}
%

Those values are fundamental in the next steps of this study. Furthermore, for now on they will be considered as data of the problem. 
%
\section{Steady state}
%
The computation of steady state values is done to achieve a reference state to use as a initial guess for the integration and for the optimal control problem. 
%
\subsection{Problem formulation}
%
The SS (Steady_State) is calculated using a similar formulation as in the static case.\\
All time derivative are zero therefore all states are constant. In this case, the quasi-coordinate  ($u$, $v$, $\Omega$) are free and the equation defining the slips are taken into account. \\
The substitution of the constant values yield a system o f algebraic equations $11$ comes from the ODE, $2$ from the definition of the vertical forces, $8$ from the definition of kinematic parameters ($\delta_f$, $x_f$, \textit{etc.}), $8$ from the definition of the tyre forces and $4$ from the definition of slips. This make a total of $33$ non linear algebraic equations while the variable at play are $36$. In fact, $3$ of them can be imposed as controls. From the statement of the problem the controls are the couple applied to front and rear wheel and the torque applied to the steer. However, in this case, one can conveniently choose which variable to chose as control.\\
The author choose to impose the torque applied to the front wheel with value zero (not braking). This means that the front wheel is left free to run along with the vehicle. The other two imposed values are the rolling angle and the velocity. For the sake of model verification, here the author choose the following values.
%
\begin{equation}
    \begin{array}{l}
        u(t) = u = 10 \; [\si{\metre/\second}]\\
        \phi(t) = \phi = 0 \; [\si{\radian}]
    \end{array}
\end{equation}
%
This means that the motorcycle is going straight with a slow speed of $36\;\si{\kilo\metre/\hour}$. 
It is important to highlight that any other choice is possible providing feasible values. Moreover, any other two controls can be chosen.\\
The problem will be still non linear and can not be solved analytically. However, it can be solved as a non linear problem with a quadratic minimisation of the algebraic equation under some constraints. Those will be the same as for the static case.\\
As highlighted in the previous sections the solution is highly sensitive to initial conditions. A good choice for the first step will be to use as a guess the values computed in the static state. Not all variable are computed and those can be chosen, such as the slips and some forces.\\
The results of the minimisation problem are reported in the following section.
%
\subsection{Solution}
%
All the parameters have been computed, even the redundant one such as $x_r$, $y_r$, $\delta_f$ \textit{etc.}. However those are not of great interest and are reported in appendix.\\ %%%
The important ones are the forces and the values of the states of the dynamical system.\\
First of all the vertical loads can be confronted with the one obtained in the static case.

%
\begin{table}[h!]
    \centering
    \begin{tabular}{@{}cc@{}}
    \toprule
    \multicolumn{2}{c}{\textbf{Vertical Loads}} \\ \midrule
    ${\it Fzf_{ss}}$  & $1291.135 \; [\si{\newton}]$ \\
    ${\it Fzr_{ss}}$  & $1355.284 \; [\si{\newton}]$ \\ \bottomrule
    \end{tabular}
    \caption{Vertical load distribution in steady-state condition}
    \label{tab:vertforceSS}
\end{table}
%
As highlighted from table \ref{tab:vertforceSS} with respect to table \ref{tab:vertforce} there is a slight unload of the front wheel and therefore the load is transferred to the rear axis. It is small due to the small velocity of the vehicle.\\
As expected and reported in table \ref{tab:QC-SS} the angular velocity and the lateral velocity are almost zero. They are not zero ($10^{-12}\approx 0$) in the table because the solution through the minimization yields result up to a certain precision.

%
\begin{table}[h!]
    \centering
    \begin{tabular}{@{}cc@{}}
    \toprule
    \multicolumn{2}{c}{\textbf{Quasi-coordinates}} \\ \midrule
    ${ v_{ss}    }$  & $-7.977\times10^{-12}  \; [\si{\metre/\second}]$ \\
    ${\Omega_{ss}}$  & $ 2.901\times10^{-12}  \; [\si{\radian/\second}]$ \\ \bottomrule
    \end{tabular}
    \caption{Quasi-coordinate in steady-state condition}
    \label{tab:QC-SS}
\end{table}
%

The other states assumes the following values reported in table \ref{tab:StatesSS}.

%
\begin{table}[h!]
    \centering
    \begin{tabular}{@{}ccccc@{}}
    \toprule
    \multicolumn{5}{c}{\textbf{States in SS}} \\ \midrule
    ${  \eta_{ss}} \; [\si{\radian}]$ & ${ h_{ss}} \; [\si{\metre}]$ & ${ s_{f_{ss}}} \; [\si{\metre}]$ &  ${  \theta_{ss}} \; [\si{\radian}]$ & ${ \delta_{ss}} \; [\si{\radian}]$ \\
    $0.0288  $ & $0.456  $ & $0.057 $ & $-0.115 $ & $1.041\times10^{-10}$ \\ \bottomrule
    \end{tabular}
    \caption{States value in steady-state}
    \label{tab:StatesSS}
\end{table}
%

The computed values are very similar to the static ones. This was expected since the velocity is small and there is no internal dynamic. The value of the steering angle $\delta_{ss}$ is very small and comparable to zero for the same reason as for yaw rate. This is due to the specific condition tracked here. In fact in straight running one can expect zero torque applied by the driver. This is confirmed by the results.
%
\begin{equation}
    \tau_{ss}   = -1.363\times10^{-10} \; \si{\newton\metre}
\end{equation}
%
The angular velocity of the two wheel is trivial. In steady-state there is almost no slip therefore the assumption of free rolling can be accepted. The minimisation problem yields
%
\begin{equation}
    \begin{array}{l}
        \omega_{f_{ss}}   = 34.247 \; \si{\radian/\second}\\       
        \omega_{r_{ss}}   = 31.573 \; \si{\radian/\second}
    \end{array}
\end{equation}
%
This was expected since the radius of the wheel is around $0.3\; \si{\metre}$.\\
The minimisation also yields the slips.

\begin{table}[h!]
    \centering
    \begin{tabular}{@{}cccc@{}}
    \toprule
    \multicolumn{4}{c}{\textbf{Slips in SS}}                         \\
    \multicolumn{2}{c}{\textbf{Longitudinal} $[-]$} & \multicolumn{2}{c}{\textbf{Lateral} $[\si{\radian}]$} \\ \midrule
    $\lambda_{f_{ss}}$ & $-2.162\times10^{-14}$ & $\alpha_{f_{ss}} $ & $-1.426\times10^{-12}$\\     
    $\lambda_{r_{ss}}$ & $ 0.877\times10^{-3} $ & $\alpha_{r_{ss}} $ & $1.451\times10^{-13} $ \\ \bottomrule
    \end{tabular}
    \caption{Slips in steady-state}
    \label{tab:slipsSS}
\end{table}

In table \ref{tab:slipsSS} it is clear that all lateral slips are zero along with the front longitudinal one. The longitudinal slip at the rear wheel is greater because in order to maintain a certain speed a couple must be applied at the rear. Therefore, the trust force needed derive from the Magic Formula and as a consequence some slip should be present.\\
As previously stated, to keep a constant velocity a torque should be applied (air drag effect).
%
\begin{equation}
    { \it Myr_{ss}  }   = 9.510 \; \si{\newton\metre}                
\end{equation}
%

Force and torques applied at wheels are reported in the following table \ref{tab:FandTSSf} and \ref{tab:FandTSSr}.

\begin{table}[h!]
    \centering
    \begin{tabular}{@{}cccc@{}}
    \toprule
    \multicolumn{4}{c}{\textbf{Forces and Torques at front wheels}}                         \\
    \multicolumn{2}{c}{\textbf{Force} $[\si{\newton}]$} & \multicolumn{2}{c}{\textbf{Torque} $[\si{\newton\metre}]$}  \\ \midrule
    ${\it Fxf_{ss}}$ & $-6.999\times10^{-10}$ & ${ \it Mxf_{ss}}$ & $2.578\times10^{-9}  $\\
    ${\it Fyf_{ss}}$ & $4.353\times10^{-9}  $ & ${ \it Mzf_{ss}}$ & $-9.160\times10^{-10}$\\ 
    \bottomrule
    \end{tabular}
    \caption{Forces and torques in steady-state at front wheel}
    \label{tab:FandTSSf}
\end{table}

\begin{table}[h!]
    \centering
    \begin{tabular}{@{}cccc@{}}
    \toprule
    \multicolumn{4}{c}{\textbf{Forces and Torques at rear wheel}}                         \\
    \multicolumn{2}{c}{\textbf{Force} $[\si{\newton}]$} & \multicolumn{2}{c}{\textbf{Torque} $[\si{\newton\metre}]$} \\ \midrule
    ${\it Fxr_{ss}}$ & $30.00             $ & ${\it Mxr_{ss}}$ & $-2.029\times10^{-307}$\\
    ${\it Fyr_{ss}}$ & $3.399\times10^{-9}$ & ${\it Mzr_{ss}}$ & $-7.867\times10^{-11} $\\ 
    \bottomrule
    \end{tabular}
    \caption{Forces and torques in steady-state at rear wheel}
    \label{tab:FandTSSr}
\end{table}

In this steady state condition we are considering a motion with a dynamic somehow constrained in the vertical plane. This means that all moments and forces exerting "out of the plane" should be zero. This is in fact confirmed in table \ref{tab:FandTSSf} and \ref{tab:FandTSSr}.\\ 
The only force different from zero is the longitudinal force of the rear wheel. As expected this is the driving force applied to keep the velocity of the vehicle constant.\\
The computed steady-state will became a useful starting point for both the integration of the dynamic and the solution of the optimal control.
%